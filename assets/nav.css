/* TESORIN — Shared Header + Mobile Menu (Wealthsimple-like) */

/* Header structure */
header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 6px 0 16px;
  position: relative;
  gap: 14px;
}

.brand-link { text-decoration: none; color: inherit; display: flex; align-items: center; min-width: 0; }
.brand { display: flex; align-items: center; gap: 10px; min-width: 0; }

.brand-mark {
  width: 32px; height: 32px; border-radius: 10px;
  background: var(--card, #fff);
  display: flex; align-items: center; justify-content: center;
  box-shadow: 0 10px 24px rgba(15, 23, 42, 0.10);
  border: 1px solid rgba(148, 163, 184, 0.22);
  overflow: hidden;
  flex: 0 0 32px;
}
.brand-mark img { width: 100%; height: 100%; object-fit: contain; display: block; }

.brand-text-wrap { display: flex; flex-direction: column; min-width: 0; }
.brand-name {
  font-family: var(--font-display, serif);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.14em;
  font-size: 16px;
  white-space: nowrap;
}
.brand-tagline {
  font-size: 11px;
  color: var(--text-mute, #4f6073);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 280px;
}

/* Desktop nav */
nav[aria-label="Primary"] {
  display: flex;
  align-items: center;
  gap: 22px;
  font-size: 14px;
  font-weight: 500;
  color: var(--text-soft, #243244);
  white-space: nowrap;
}
nav[aria-label="Primary"] a { text-decoration: none; color: inherit; padding: 4px 0; }
nav[aria-label="Primary"] a:hover { color: var(--text-main, #0b1220); }

/* Optional: active page state (set by JS) */
nav[aria-label="Primary"] a.is-active {
  color: var(--text-main, #0b1220);
  box-shadow: inset 0 -1px 0 rgba(148, 163, 184, 0.50);
}

/* Keep your existing “highlight pill” style working across pages */
nav[aria-label="Primary"] a.highlight {
  padding: 8px 14px;
  border-radius: 999px;
  border: 1px solid rgba(148, 163, 184, 0.55);
  font-size: 13px;
  font-weight: 600;
  color: var(--text-main, #0b1220);
  background: rgba(255, 255, 255, 0.82);
  box-shadow: 0 10px 22px rgba(15, 23, 42, 0.06);
}

/* Mobile menu button */
.menu-btn {
  display: none;
  border: 1px solid rgba(148, 163, 184, 0.55);
  background: rgba(255, 255, 255, 0.85);
  padding: 8px 10px;
  border-radius: 999px;
  cursor: pointer;
  line-height: 0;
  -webkit-tap-highlight-color: transparent;
}

.menu-bars {
  width: 18px; height: 2px; background: #111827;
  display: block; position: relative; border-radius: 2px;
  transition: background 180ms cubic-bezier(0.2,0.8,0.2,1);
}
.menu-bars::before, .menu-bars::after {
  content: "";
  position: absolute; left: 0;
  width: 18px; height: 2px; background: #111827;
  border-radius: 2px;
  transform-origin: center;
  transition: transform 180ms cubic-bezier(0.2,0.8,0.2,1), top 180ms cubic-bezier(0.2,0.8,0.2,1);
}
.menu-bars::before { top: -6px; }
.menu-bars::after { top: 6px; }

/* Hamburger morph to X */
.menu-btn[aria-expanded="true"] .menu-bars { background: transparent; }
.menu-btn[aria-expanded="true"] .menu-bars::before { top: 0; transform: rotate(45deg); }
.menu-btn[aria-expanded="true"] .menu-bars::after { top: 0; transform: rotate(-45deg); }

/* Mobile Menu — Full-screen, grid-aligned */
.menu-overlay {
  position: fixed;
  inset: 0;
  z-index: 999;
  pointer-events: none;
}

.menu-backdrop {
  position: absolute;
  inset: 0;
  background: rgba(11, 18, 32, 0.36);
  opacity: 0;
  transition: opacity 180ms cubic-bezier(0.2, 0.8, 0.2, 1);
}

.menu-panel {
  position: absolute;
  inset: 0;
  height: 100dvh;
  background: rgba(251, 252, 253, 0.98);
  backdrop-filter: blur(10px);

  transform: translate3d(0, 10px, 0);
  opacity: 0;

  transition:
    transform 220ms cubic-bezier(0.2, 0.8, 0.2, 1),
    opacity 160ms cubic-bezier(0.2, 0.8, 0.2, 1);

  will-change: transform, opacity;
}

.menu-panel-inner {
  max-width: var(--max-width, 1120px);
  margin: 0 auto;
  padding: calc(14px + env(safe-area-inset-top)) 16px 22px;
  height: 100%;
  display: flex;
  flex-direction: column;
}

.menu-panel-head {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 2px 0 10px;
  border-bottom: 1px solid rgba(148, 163, 184, 0.22);
}

.menu-brand {
  display: inline-flex;
  align-items: center;
  gap: 10px;
  text-decoration: none;
  color: var(--text-main, #0b1220);
  min-width: 0;
}

.menu-brand-mark {
  width: 32px;
  height: 32px;
  border-radius: 10px;
  background: rgba(255, 255, 255, 0.85);
  border: 1px solid rgba(148, 163, 184, 0.22);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  flex: 0 0 32px;
}

.menu-brand-mark img { display: block; width: 22px; height: 22px; object-fit: contain; }

.menu-brand-text {
  font-family: var(--font-display, serif);
  letter-spacing: 0.14em;
  text-transform: uppercase;
  font-weight: 600;
  font-size: 14px;
  white-space: nowrap;
}

.menu-close {
  border: 1px solid rgba(148, 163, 184, 0.40);
  background: rgba(255, 255, 255, 0.70);
  width: 40px;
  height: 40px;
  border-radius: 999px;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  -webkit-tap-highlight-color: transparent;
  font-size: 22px;
  line-height: 0;
  color: #111827;
}

.menu-panel-nav {
  display: flex;
  flex-direction: column;
  padding: 8px 0 0;
  flex: 1;
}

.menu-panel-nav a {
  text-decoration: none;
  color: var(--text-main, #0b1220);
  font-size: 16px;
  font-weight: 500;
  padding: 14px 2px;
  border-bottom: 1px solid rgba(148, 163, 184, 0.18);
}

.menu-panel-nav a:hover { color: #0b1220; }

.menu-panel-nav .mobile-cta {
  margin-top: auto;
  border-bottom: none;
  padding: 14px 16px;
  border-radius: 999px;
  background: #0b1220;
  color: #fff;
  text-align: center;
  font-weight: 600;
  box-shadow: 0 14px 30px rgba(15, 23, 42, 0.22);
}
.menu-panel-nav .mobile-cta:hover { background: #111827; }

/* Open state */
.menu-overlay[data-open="true"] { pointer-events: auto; }
.menu-overlay[data-open="true"] .menu-backdrop { opacity: 1; }
.menu-overlay[data-open="true"] .menu-panel { transform: translate3d(0, 0, 0); opacity: 1; }

/* Scroll lock */
html.menu-open,
body.menu-open { overflow: hidden; }

/* Responsive: hide desktop nav, show button */
@media (max-width: 880px) {
  nav[aria-label="Primary"] { display: none; }
  .menu-btn { display: inline-flex; align-items: center; justify-content: center; }
  header { padding-bottom: 14px; }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  .menu-backdrop, .menu-panel { transition: none !important; }
}
